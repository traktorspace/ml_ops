defaults:
  - _self_

project_name: Cloud Annotation
hydra:
  run:
    dir: ${hydra:runtime.cwd}/logs/hydra/pull/${now:%Y-%m-%d}/${now:%H-%M-%S}
  output_subdir: null

criteria:
  artifact_destination: ${as_path:/bigdata/cloud_test/hf1a_cloud_dataset/training_set}
  # ${as_path:/bigdata/datasets_analytics/clouds/hf1a_reflectance/pipeline_test}
  prod_selection_query: annotation_pipeline.utils.db_queries.fetch_encord_uploaded_but_not_downloaded_products_from_annotation_db
logging:
  logdir: ${as_path:${hydra:runtime.cwd}/logs/scripts/pull}
  console_fmt: >-
    <green>{time:YYYY/MM/DD-HH:mm:ss!UTC}</green> |
    <level>{level: <8}</level> |
    <cyan>{name}:{function}:{line}</cyan> -
    <level>{message}</level>
  file_fmt: "{time:YYYY MM DD HH:mm:ss!UTC} | {level: <8} | {message}"
  noisy_pkgs:
    - encord
    - frame-aligner

job_processor:
  query_success: annotation_pipeline.utils.db_queries.mark_annotation_processed
  query_failure: annotation_pipeline.utils.db_queries.write_exception
  allow_overwriting: true 
  dry_run: false
  use_cloud_data_source: true 
  aligner_method: 'roma'
  aligner_device: 'cuda:1'
  save_only_annotation: false 

secrets:
  dotenv: ${as_path:/home/mlops/repos/ml_ops/annotation_pipeline/configs/cloud_annotation/.env}

debug_settings:
  limit_product_processed: true
  max_product_processed: 1000 